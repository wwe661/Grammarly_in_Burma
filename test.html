<!doctype html>
<html>
  <head>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #1a1a1a;
        margin: 0;
        overflow: hidden;
      }

      #container {
        position: relative;
        width: 400px;
        height: 100px;
        cursor: pointer;
      }

      /* The Main Green Line */
      #line {
        position: absolute;
        top: 50%;
        width: 100%;
        height: 30px;
        background-color: #32cd32;
        border-radius: 15px;
        transform: translateY(-50%);
        transition:
          box-shadow 0.3s ease,
          background-color 0.3s ease;
        z-index: 2;
      }

      /* Glow effect class toggled by JS */
      .glow {
        box-shadow:
          0 0 20px 5px #32cd32,
          0 0 40px 10px #32cd32;
        background-color: #adff2f !important;
      }

      canvas {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <canvas id="bubbleCanvas"></canvas>
      <div id="line"></div>
    </div>

    <script>
      const container = document.getElementById("container");
      const line = document.getElementById("line");
      const canvas = document.getElementById("bubbleCanvas");
      const ctx = canvas.getContext("2d");

      // Resize canvas to match container
      canvas.width = container.offsetWidth;
      canvas.height = container.offsetHeight;

      let particles = [];
      let isAnimating = false;

      class Particle {
        constructor() {
          this.x = Math.random() * canvas.width;
          // Start from the middle (where the line is)
          this.y = canvas.height / 2;
          this.size = Math.random() * 5 + 2;
          this.speedY = Math.random() * -3 - 1; // Rise upwards
          this.speedX = (Math.random() - 0.5) * 2;
          this.opacity = 1;
        }

        update() {
          this.y += this.speedY;
          this.x += this.speedX;
          this.opacity -= 0.02; // Fade out
        }

        draw() {
          ctx.fillStyle = `rgba(50, 205, 50, ${this.opacity})`;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let i = 0; i < particles.length; i++) {
          particles[i].update();
          particles[i].draw();

          // Remove transparent particles
          if (particles[i].opacity <= 0) {
            particles.splice(i, 1);
            i--;
          }
        }

        if (particles.length > 0 || isAnimating) {
          requestAnimationFrame(animate);
        }
      }

      container.addEventListener("click", () => {
        if (isAnimating) return; // Prevent overlapping clicks

        isAnimating = true;
        line.classList.add("glow");

        // Create a burst of bubbles
        const burstInterval = setInterval(() => {
          for (let i = 0; i < 5; i++) {
            particles.push(new Particle());
          }
        }, 50);

        // Start animation loop
        animate();

        // Stop creating bubbles after 1 second
        setTimeout(() => {
          clearInterval(burstInterval);
          line.classList.remove("glow");
          isAnimating = false;
        }, 1000);
      });
    </script>
  </body>
</html>
